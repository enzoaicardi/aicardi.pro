var smallDomDebug=!1,smallDomErrorArgs=[];function smallDomReplace(e,r){e="all"===e?"small-dom":e;for(var n=document.querySelectorAll(e||"small-dom"),o=0;o<n.length;o++)try{var l=n[o],t=l.textContent;(smallDomDebug=!!l.hasAttribute("debug"))&&(console.log("----- SOURCE ELEMENT HERE"),console.log(l)),smallDomErrorArgs=[l,t],err=errAsHTML,i(smallDomTranspile(t,r))}catch(e){continue}function i(e){return l.outerHTML=e,document.body.innerHTML}return document.body.innerHTML}function smallDomTranspile(e,r){return smallDomGenerator(smallDomParser(smallDomTokeniser(e)),r)}function smallDomTokeniser(e){var r=[],n={},o=0,l=0,t=0,i=0,a=0,s=0,d=0,c=0,u=/\s/,m=/[\w\d]/,f=/\w/,p=/\d/;function E(e,n,u){r.push({input:e,type:n,key:u||n||"UNDEFINED",position:{start:{char:a,line:o,col:d,lineFirstChar:t},end:{char:s,line:l,col:c,lineFirstChar:i}}})}E(null,"BORDER","START");for(var g=0;g<e.length;g++){a=g;var T=e[g],h=T,b="UNDEFINED",v=null,L=0;if(f.test(T))for(b="KEYWORD",v="ELEMENT",L=-1,g++;e[g]&&(m.test(e[g])||"-"===e[g]);)"!"===e[g+1]&&(v="SELF_CLOSING_ELEMENT",L=0),"("===e[g+1]&&(v="FUNCTION"),h+=e[g],g++;else if(p.test(T))for(b="NUMBER",L=-1,g++;e[g]&&p.test(e[g]);)h+=e[g],g++;else if("$"===T&&m.test(e[g+1])){for(h="",b="VARIABLE",v="DECLARATION",g++,L=-1;e[g]&&!u.test(e[g]);)m.test(e[g])||err(errMissingAfter("BLANK",b,v),R()),h+=e[g],g++;g++;for(var A="";e[g]&&"\n"!==e[g]&&";"!==e[g];)"\\"===e[g]&&";"===e[g+1]&&g++,A+=e[g],g++;";"===e[g]&&g++,n[h]=A}else{if("$"===T&&"{"===e[g+1]){g=y(g);continue}if("\n"===T)b="BLANK",v="BREAK",D();else if("+"===T||"-"===T||"="===T)b="OPERATOR",v="+"===T?"LEVEL_UP":"-"===T?"LEVEL_DOWN":"LEVEL_EQUAL";else if('"'===T||"{"===T){var N='"'===T?T:"}";for(h="",b="TEXT",g++;e[g]!==N;)e[g]||err(errMissingClose(b),R()),"\n"===e[g]&&x(),"$"!==e[g]||"{"!==e[g+1]?("\\"===e[g]&&e[g+1]&&g++,h+=e[g],g++):y(g)}else if("["===T)for(h="",b="ATTRIBUTE",v="ATTRIBUTE_NAME",g++;"]"!==e[g];)e[g]&&!u.test(e[g])||err(errMissingClose(v),R()),"$"!==e[g]||"{"!==e[g+1]?(h+=e[g],g++):y(g);else if("."===T)for(h="",b="ATTRIBUTE",v="CLASS",L=-1,g++;e[g]&&!u.test(e[g]);){if("."===e[g])h+=" ";else{if("$"===e[g]&&"{"===e[g+1]){y(g);continue}h+=e[g]}g++}else if("("===T)for(h="",b="VALUE",v="VALUE",g++;")"!==e[g];)e[g]||err(errMissingClose(v),R()),"$"!==e[g]||"{"!==e[g+1]?("\\"===e[g]&&e[g+1]&&g++,h+=e[g],g++):y(g);else if("#"===T)for(h="",b="COMMENT",v="COMMENT_INLINE",L=-1,g++;e[g]&&"\n"!==e[g];)h+=e[g],g++;else" "===T?"    "===e.substring(g,g+4)?(h="    ",b="BLANK",v="TAB",L=3):(b="BLANK",v="SPACE"):"\t"===T&&(h="    ",b="BLANK",v="TAB")}function y(r){for(var o="",l=g+=2;"}"!==e[l];)"\\"!==e[l]?(e[l]&&m.test(e[l])||err(errMissingClose("VARIABLE SUMMON"),R()),o+=e[l],l++):l++;var t=n[o];t||err(errUndefined(o,"VARIABLE"),R());var i=e.slice(0,r),a=e.slice(l+1);return e=i+t+a,h+=t,smallDomErrorArgs[1]=e,g+=t.length-2,r-1}function D(){l++,t=g+1,i=g+1}function x(){l++,i=g+1}function M(){d=a-t,c=(s=g+=L)-i}function R(){return M(),{start:{line:o,char:a,col:d},end:{line:l,char:s,col:c}}}M(),E(h,b,v),o=l}return E(null,"BORDER","END"),smallDomDebug&&(console.log("----- TOKEN LIST HERE"),console.log(r)),r}function smallDomParser(e){var r={nodeName:"body",nodeType:"BODY",nodeValue:"",level:0,br:0,childs:[],attributes:[],position:{}},n=1,o=0,l=!0;return function t(i,a){var s=i.childs||r.childs,d=a||0;function c(e,r,n,l){var t={nodeToken:e,nodeName:e.input,nodeType:n||"ELEMENT",nodeValue:l||e.input,level:r,br:o,childs:[],attributes:[]};return o=0,s.push(t),t}for(d=a;d<e.length;d++){var u=e,m=e[d];if("BLANK"!==m.type&&"BORDER"!==m.type&&(l=!1),"OPERATOR"!==m.type)if("KEYWORD"!==m.type){if("ATTRIBUTE"===m.type){if("CLASS"===m.key){i.attributes.push({name:"class",value:m.input});continue}if("ATTRIBUTE_NAME"===m.key){f="","VALUE"===u[d+1].key&&(f=u[d+1].input),i.attributes.push({name:m.input,value:f});continue}}if("TEXT"!==m.type){if("BLANK"===m.type){if("BREAK"===m.key){o++,n=1,l=!0;continue}if(!l)continue;if("SPACE"===m.key){n++;continue}if("TAB"===m.key){n+=4;continue}}}else{if(i.level>n)return E();c(m,n,m.type)}}else{if(i.level>=n)return E();if("FUNCTION"===m.key){if("VALUE"===u[d+1].key){var f=u[d+1].input;c(m,n,m.key,f)}continue}var p=t(c(m,n),d+1);d=p.i,n=p.level}else"LEVEL_UP"===m.key&&n++,"LEVEL_DOWN"===m.key&&n--}function E(){return l=!0,{level:n,i:d-1}}return{level:n,i:d}}(r,0),smallDomDebug&&(console.log("----- NODE TREE HERE"),console.log(r)),r}function smallDomGenerator(e,r){var n="",o=(r=r||{}).mode||"inline",l=r.breaks||1,t={};function i(e,r){var l=s(e),t=d(e),i="";if(!r)for(attr of e.attributes)i+=" "+attr.name+(attr.value?'="'+escapeHTML(attr.value)+'"':"");var a="SELF_CLOSING_ELEMENT"===e.nodeToken.key,c="";if(!r||!a){var u=e.childs.length?d(e.childs[0]):"";c+=(!r||"pre"!==o&&"pre-wrap"!==o?t:u)+("wrap"===o||t&&(!r||u)?l:"")+"<"+(r?"/":"")+e.nodeName+i+(a?" /":"")+">"}n+=c}function a(e){i(e,!0)}function s(e){var r="";return"inline"!==o&&(r=" ".repeat(e.level-1)),r}function d(e){var r="";return"pre"===o?r="\n".repeat(e.br):"wrap"===o?r="\n".repeat(l):"pre-wrap"===o&&e.br&&(r="\n".repeat(l)),r}function c(e){return e&&/^[0-9]*$/.test(e)&&Number(e)||0}function u(e,r,n){if(e.level=e.level-r+n.level,"include"===e.nodeName&&e.nodeValue===n.nodeValue&&err(errValue(e.nodeValue,e.nodeName),e.nodeToken.position),"ELEMENT"===e.nodeType)for(var o of e.childs)u(o,r,n)}return function e(r){for(var l=r.childs,m=0;m<l.length;m++){var f=l[m];if("TEXT"!==f.nodeType)if("ELEMENT"!==f.nodeType){if("FUNCTION"===f.nodeType){if("break"===f.nodeName)continue;var p=f.nodeValue.replace(/ ?, ?/g,",").split(","),E=f.nodeToken.position;if("clone"===f.nodeName){for(var g=c(p[0]),T=c(p[1])||1,h=[],b=0;b<g;b++)for(var v=0;v<T;v++)h.push(l[m+v+1]);l.splice(m+1,0,...h);continue}if("template"===f.nodeName){l[m+1]||err(errMissingAfter("ELEMENT",f.nodeType,f.nodeName),E),t[f.nodeValue]=l[m+1];continue}if("include"===f.nodeName){var L=f.nodeValue,A=t[L];A||err(errUndefined(L,"TEMPLATE"),E),("inline"!==o||smallDomDebug)&&u(A,A.level,f),l.splice(m+1,0,A);continue}err(errUndefined(f.nodeName,f.nodeType),E)}}else i(f),e(f),a(f);else{var N=d(f);n+=N+(N?s(f):"")+escapeHTML(f.nodeValue)}}return n}(e),smallDomDebug&&(console.log("----- HTML GENERATED HERE"),console.log(n)),n}function escapeHTML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function domCopy(e){var r=document.querySelectorAll("[data-smalldom]");for(element of r)element.remove();var n=e?document.querySelector(e).outerHTML:"<!DOCTYPE html>"+document.documentElement.outerHTML;navigator.clipboard.writeText(n).then(function(){console.log("DOM successfully copied !")})}function errMissingClose(e){return"Missing "+e+" close symbol."}function errMissingBefore(e,r,n){return e+" is missing before "+r+" "+(n||"")}function errMissingAfter(e,r,n){return e+" is missing after "+r+" "+(n||"")}function errUndefined(e,r){return e+" is not a defined "+r}function errValue(e,r){return e+" is not a correct value of "+r}var err=function(e,r,n){smallDomErrorArgs=[]};function errAsConsoleLog(e,r,n){n=n||"SyntaxError";var o="";"undefined"!=typeof smallDomErrURL&&(o="\n"+smallDomErrURL+":"+r.start.line+":"+r.start.col);var l=n+": \n\n"+e+"\n\nStart at - Line: "+r.start.line+" | Column: "+r.start.col+"\n  End at - Line: "+r.end.line+" | Column: "+r.end.col+"\n"+o;throw console.error(l),"smallDom ERROR"}function errAsHTML(e,r,n){n=n||"SyntaxError";var o=smallDomErrorArgs[0],l=smallDomErrorArgs[1],t=document.head,i=document.createElement("style");i.textContent=" small-dom{ display: flex; flex-direction: column; font-family: Arial, Verdana, sans-serif; gap: 20px; width: 100%; min-width: 500px; height: min-content; padding: 20px; box-sizing: border-box; border-radius: 5px; background-color: white; box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2); } small-dom *{ box-sizing: border-box; } small-dom-title{ display: flex; align-items: center; justify-content: center; width: max-content; height: 40px; padding: 0 20px; background-color: hsl(40, 90%, 65%); border-radius: 5px; color: white; font-weight: normal; font-size: 16px; } small-dom-code{ padding: 20px 0; box-sizing: border-box; background-color: hsl(40, 10%, 10%); border-radius: 5px; font-family: monospace; font-size: 14px; overflow: auto; } small-dom-code table{ width: 100%; border: none; border-collapse: collapse; table-layout: fixed; } small-dom-code table tr{ cursor: pointer; background-color: inherit; } small-dom-code table tr:nth-child(odd){ background-color: hsl(40, 10%, 15%); } small-dom-code table tr:hover{ background-color: hsl(215, 90%, 50%); } small-dom-code table tr td{ height: 20px; max-width: max-content; white-space: pre; color: white; padding: 2px 10px; } small-dom-code table tr td:first-child{ width: 40px; text-align: right; color: hsl(40, 90%, 65%); border-right: 1px solid #cccccc; } small-dom-error{ display: inline; padding: 1px 2px; margin: 0 2px; border-radius: 2px; background-color: hsl(40, 90%, 45%); } small-dom-banner{ width: 100%; max-width: max-content; height: auto; padding: 0 2px; background-color: white; color: hsl(40, 10%, 15%); font-size: 14px; font-family: monospace; } small-dom-orange{ color: hsl(40, 90%, 65%); } ",t.appendChild(i);var a="<small-dom-title>"+n+"</small-dom-title>",s=l,d=s.substring(0,r.start.char),c=s.substring(r.start.char,r.end.char+1),u=s.substring(r.end.char+1,s.length);a+='<small-dom-code class="ns">'+(s=function(e){for(var r=e.split("\n"),n="<table>",o=0;o<r.length;o++)n+="<tr><td>"+o+"</td><td>"+r[o]+"</td></tr>\n";return n+"</table>"}(s=d+"<small-dom-error>"+c+"</small-dom-error>"+u))+"</small-dom-code>";var m=n+": ";throw a+="<small-dom-banner>"+(m+=e||"no details")+"</small-dom-banner>",o.innerHTML=a,"smallDom ERROR"}err=errAsConsoleLog;